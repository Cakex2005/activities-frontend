<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>BCrypt éªŒè¯å™¨</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
        }

        .section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #f9fafb;
        }

        input,
        button {
            padding: 12px;
            margin: 5px 0;
            width: 100%;
            box-sizing: border-box;
        }

        button {
            background: #2563eb;
            color: white;
            border: none;
            cursor: pointer;
        }

        .result {
            margin-top: 15px;
            padding: 15px;
            border-radius: 4px;
            font-weight: bold;
        }

        .success {
            background: #dcfce7;
            color: #15803d;
        }

        .error {
            background: #fee2e2;
            color: #b91c1c;
        }

        .info {
            background: #e0f2fe;
            color: #0369a1;
        }
    </style>
</head>

<body>
    <h1>ğŸ” BCrypt å¯†ç éªŒè¯å™¨</h1>

    <div class="section">
        <h2>æ–¹æ³•1: åœ¨çº¿éªŒè¯</h2>
        <div class="info result">
            <p>æ‰“å¼€ç½‘ç«™: <a href="https://bcrypt-generator.com/" target="_blank">https://bcrypt-generator.com/</a></p>
            <p>åœ¨ "Verify Hash" é€‰é¡¹å¡ä¸­:</p>
            <ul>
                <li><strong>Password:</strong> admin123</li>
                <li><strong>Hash:</strong> $2a$10$N.zmdr9k7uOCQb376NoUnuTJ8iAt6Z5EHsM8lE9lBOsl7iKTVKIUi</li>
            </ul>
            <p>ç‚¹å‡» "Verify" æŸ¥çœ‹æ˜¯å¦åŒ¹é…</p>
        </div>
    </div>

    <div class="section">
        <h2>æ–¹æ³•2: åç«¯æµ‹è¯•</h2>
        <div class="info result">
            <p>åœ¨åç«¯é¡¹ç›®ä¸­æ·»åŠ æµ‹è¯•ä»£ç ,ç›´æ¥è°ƒç”¨ BCryptUtil.verifyPassword():</p>
            <pre style="background: #f3f4f6; padding: 10px; border-radius: 4px; overflow-x: auto;">
public static void main(String[] args) {
    String password = "admin123";
    String hash = "$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8iAt6Z5EHsM8lE9lBOsl7iKTVKIUi";
    
    boolean result = BCryptUtil.verifyPassword(password, hash);
    System.out.println("éªŒè¯ç»“æœ: " + result);
    
    // åŒæ—¶æµ‹è¯•å…¶ä»–å¯†ç 
    String[] testPasswords = {"admin123", "Admin123", "admin", "123456"};
    for (String pwd : testPasswords) {
        boolean match = BCryptUtil.verifyPassword(pwd, hash);
        System.out.println(pwd + ": " + match);
    }
}</pre>
        </div>
    </div>

    <div class="section">
        <h2>æ–¹æ³•3: æ£€æŸ¥åç«¯æ—¥å¿—</h2>
        <div class="info result">
            <p>åœ¨ AuthServiceImpl.java çš„ç¬¬ 59 è¡Œæ·»åŠ æ—¥å¿—è¾“å‡º:</p>
            <pre style="background: #f3f4f6; padding: 10px; border-radius: 4px; overflow-x: auto;">
// éªŒè¯å¯†ç ï¼ˆä½¿ç”¨BCryptåŠ å¯†æ¯”å¯¹ï¼‰
log.info("éªŒè¯å¯†ç  - è¾“å…¥å¯†ç : {}", loginDTO.getPassword());
log.info("éªŒè¯å¯†ç  - æ•°æ®åº“Hash: {}", administrator.getPassword());
boolean verified = BCryptUtil.verifyPassword(loginDTO.getPassword(), administrator.getPassword());
log.info("éªŒè¯å¯†ç  - ç»“æœ: {}", verified);

if (!verified) {
    throw new BizException(ResultCodeEnum.ADMIN_ACCOUNT_ERROR);
}</pre>
            <p>é‡å¯åç«¯,å†æ¬¡ç™»å½•,æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—</p>
        </div>
    </div>

    <div class="section">
        <h2>å¿«é€Ÿè§£å†³æ–¹æ¡ˆ</h2>
        <div class="error result">
            <p><strong>å¦‚æœä»¥ä¸Šéƒ½å¤±è´¥,ç›´æ¥é‡ç½®å¯†ç :</strong></p>
            <p>1. åœ¨æ•°æ®åº“ä¸­æ‰§è¡Œ:</p>
            <pre style="background: #fff; padding: 10px; border-radius: 4px; margin: 10px 0;">
-- ä½¿ç”¨Spring Booté»˜è®¤BCrypt (cost=12) ç”Ÿæˆçš„admin123
UPDATE administrators 
SET password = '$2a$12$LQv3c1yqBWVHxkd0LHAkCOYz6TtxMQJqhN96QiYldYjm0wGxiH9IK' 
WHERE username = 'admin';</pre>
            <p>2. é‡å¯åç«¯æœåŠ¡</p>
            <p>3. ä½¿ç”¨ admin/admin123 ç™»å½•</p>
        </div>
    </div>

    <script>
        console.log('é¡µé¢å·²åŠ è½½');
        console.log('å¦‚æœéœ€è¦JavaScriptéªŒè¯,è¯·æŒ‰F12æ‰“å¼€æ§åˆ¶å°æŸ¥çœ‹æ­¤æ¶ˆæ¯');
    </script>
</body>

</html>